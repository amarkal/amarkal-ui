!function(a,b){var c;void 0===b.Amarkal?(c={},b.Amarkal=c):c=b.Amarkal,c.UI={components:{},registerComponent:function(a,b){c.UI.components.hasOwnProperty(a)?console.error("Attempting to register an existing component type '"+a+"'"):c.UI.components[a]=b},getComponentConfig:function(a){if(c.UI.components.hasOwnProperty(a))return c.UI.components[a];console.error("A component type '"+a+"' has not been registered")},createComponent:function(b){var d=b.attr("class").match(/amarkal-ui-component-([a-z]+)/)[1],e=c.UI.getComponentConfig(d),f=a.extend({},c.UI.abstractComponent,e);f.$el=b;for(var g in f)"function"==typeof f[g]&&(f[g]=f[g].bind(f));return f.onInit(),f},init:function(){a(".amarkal-ui-component").amarkalUIComponent()}},a(document).ready(function(){c.UI.init()}),c.UI.abstractComponent={$el:null,validity:null,reset:function(){this.makeValid()},getValue:function(){},setValue:function(){},setValidity:function(a){a===this.VALID&&this.$el.removeClass("amarkal-ui-component-error"),a===this.INVALID&&this.$el.addClass("amarkal-ui-component-error"),this.validity=a},getValidity:function(){return this.validity},makeInvalid:function(){this.setValidity(this.INVALID)},makeValid:function(){this.setValidity(this.VALID)},onInit:function(){},onChange:function(){this.$el.trigger("amarkal.change",[this])},VALID:"valid",INVALID:"invalid"},a.fn.extend({amarkalUIComponent:function(b){var d,e=arguments.length>1?Array.apply(null,arguments).slice(1):null;return d=this.each(function(){if(!a(this).hasClass("amarkal-ui-component"))throw"This element is not an Amarkal UI component";void 0===a(this).data("amarkal-ui-component")&&a(this).data("amarkal-ui-component",c.UI.createComponent(a(this)));var f=a(this).data("amarkal-ui-component");if(void 0!==b&&f.hasOwnProperty(b)&&void 0!==(d=f[b].apply(f,e)))return!1})}}),c.UI.registerComponent("checkbox",{setValue:function(a){if(this.$el.find("input").attr("checked",!1),a.length)for(var b=0;b<a.length;b++)this.$el.find('input[value="'+a[b]+'"]').attr("checked",!0)},getValue:function(){return this.$el.find("input[checked]").toArray().map(function(a){return a.value})},onInit:function(){var a=this;this.$el.find("input").on("change",function(){a.onChange()})}}),c.UI.registerComponent("composite",{setValue:function(a){for(var b in a)this.$el.find('[amarkal-component-name="'+b+'"]').amarkalUIComponent("setValue",a[b])},getValue:function(){var b={};return this.$el.find(".amarkal-ui-component").each(function(){var c=a(this).attr("amarkal-component-name");a(this).amarkalUIComponent(),b[c]=a(this).amarkalUIComponent("getValue")}),b},onInit:function(){var a=this;this.$el.find(".amarkal-ui-component").on("amarkal.change",function(){a.onChange()})}}),c.UI.registerComponent("number",{setValue:function(a){this.$el.find("input").val(a)},getValue:function(){return this.$el.find("input").val()},onInit:function(){var a=this;this.$el.find("input").on("change",function(){a.onChange()})}}),c.UI.registerComponent("radio",{setValue:function(a){this.$el.find("input").attr("checked",!1),this.$el.find('input[value="'+a+'"]').attr("checked",!0)},getValue:function(){return this.$el.find("input[checked]").val()},onInit:function(){var a=this;this.$el.find("input").on("change",function(){a.onChange()})}}),c.UI.registerComponent("select",{setValue:function(a){this.$el.find("select > option").attr("selected",!1),this.$el.find('select > option[value="'+a+'"]').attr("selected",!0)},getValue:function(){return this.$el.find("select > option[selected]").toArray().map(function(a){return a.value})[0]},onInit:function(){var a=this;this.$el.find("select").on("change",function(){a.onChange()})}}),c.UI.registerComponent("text",{setValue:function(a){this.$el.find("input").val(a)},getValue:function(){return this.$el.find("input").val()},onInit:function(){var a=this;this.$el.on("keyup",function(){a.onChange()})}}),c.UI.registerComponent("textarea",{setValue:function(a){this.$el.find("textarea").val(a)},getValue:function(){return this.$el.find("textarea").val()},onInit:function(){var a=this;this.$el.find("textarea").on("keyup",function(){a.onChange()})}})}(jQuery,window);